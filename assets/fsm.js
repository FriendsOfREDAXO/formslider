function I(n={}){n=Object.assign({selector:".formslider",showProgress:!0,showProgressCount:!1,nextButtonLabel:"Next",nextButtonClasses:"",prevButtonLabel:"Prev",prevButtonClasses:"",deleteDivClasses:"",deleteDataButtonLabel:"Delete my data",deleteDataButtonClasses:"",deleteDataHeadline:"<h6>Delete data</h6>",deleteDataText:"<p>Your data is stored locally in your browser. If you want to delete your data, you can do so by clicking the button below. (If you are on a public computer, you should delete your data.)</p>",prependProgress:!1,progressClickable:!0},n),document.querySelectorAll(n.selector).forEach(function(e){let a=e.id,t=0;const l=e.querySelector("form"),i=e.querySelectorAll("fieldset");let c=i.length;l.querySelectorAll("input, select, textarea").forEach(function(s){let o=E(s);s.attributes.required&&o.classList.add("required"),s.addEventListener("focus",function(){let r=E(s);r&&r.classList.add("active")}),s.addEventListener("blur",function(){let r=E(s);r&&s.value===""&&r.classList.remove("active")})});let y=localStorage.getItem(l.id);if(y){let s=JSON.parse(y);for(let o in s){let r=l.querySelector('[name="'+o+'"]');if(r)if(r.type==="checkbox")r.checked=!0;else if(r.type==="radio"){let q=l.querySelectorAll('[name="'+o+'"][value="'+s[o]+'"]');for(let g of q)g.value===s[o]&&(g.checked=!0)}else r.value=s[o]}}if(n.showProgress){var u=document.createElement("div");u.classList.add("form-progress"),n.prependProgress?e.prepend(u):e.appendChild(u),i.forEach(function(s,o){var r=document.createElement("div");r.classList.add("form-progress-step"),r.setAttribute("data-stepcount",o),n.progressClickable&&(r.classList.add("clickable"),r.addEventListener("click",function(){t=o,t=m(t,l,d,v,c,o),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})})),n.showProgressCount&&(r.innerHTML=o+1),u.appendChild(r)})}let f=u.querySelector('[data-stepcount="'+t+'"]');var p=document.createElement("div");p.classList.add("formslider-nav"),e.appendChild(p);var d=document.createElement("button");d.innerHTML=n.prevButtonLabel,d.classList.add("form-prev-button"),n.prevButtonClasses&&n.prevButtonClasses.split(" ").forEach(function(o){d.classList.add(o)}),p.appendChild(d),t===0&&(d.style.display="none",f.classList.add("active"));var v=document.createElement("button");v.innerHTML=n.nextButtonLabel,v.classList.add("form-next-button"),n.nextButtonClasses&&n.nextButtonClasses.split(" ").forEach(function(o){v.classList.add(o)}),p.appendChild(v);for(let s=0;s<c;s++)i[s].setAttribute("data-count",s);d.addEventListener("click",function(){L(l),t=m(t,l,d,v,c,"prev"),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),v.addEventListener("click",function(){L(l),t=m(t,l,d,v,c,"next"),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),S(l,i),l.addEventListener("submit",function(s){L(l)}),l.querySelector('button[type="submit"]').addEventListener("click",function(){L(l),l.querySelectorAll(":invalid").forEach(o=>{console.log(o),o.classList.add("invalid")}),l.querySelector(":invalid").focus();let s=l.querySelector(":invalid");t=parseInt(s.closest("fieldset").getAttribute("data-count")),t=m(t,l,d,v,c,t),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})})});function b(e,a,t,l,i){let h=l.querySelector('fieldset[data-count="'+t+'"]').offsetHeight;return i.style.height=h+"px",a.classList.remove("active"),a.classList.add("done"),a=e.querySelector('[data-stepcount="'+t+'"]'),a.classList.add("active"),a}function m(e,a,t,l,i,c){switch(c){case"first":e=0;break;case"prev":e>0&&e--;break;case"next":e<i-1&&e++;break;case"last":e=i-1;break;case typeof c=="number":c>=0&&c<i&&(e=c);break}return e===0?(a.style.left="0",t.style.display="none",l.style.display="inline-block"):e>0&&e<i-1?(a.style.left="-"+e+"00%",t.style.display="inline-block",l.style.display="inline-block"):e===i-1&&(a.style.left="-"+e+"00%",t.style.display="inline-block",l.style.display="none"),k(a),e}function k(e){e.querySelectorAll('input[name$="_again"]').forEach(function(a){let t=a.name,l=e.querySelector('input[name="'+t.replace("_again","")+'"]').value;l?a.value=l:a.value=""})}function L(e){let a=new FormData(e),t=C(a);localStorage.setItem(e.id,JSON.stringify(t))}function C(e){let a={};for(let[t,l]of e)t.endsWith("_csrf_token")||(a[t]!==void 0?(Array.isArray(a[t])||(a[t]=[a[t]]),a[t].push(l)):a[t]=l);return a}function E(e){var a=e.id;let t=document.getElementsByTagName("label");for(var l=0;l<t.length;l++)if(t[l].htmlFor==a)return t[l]}function B(e){localStorage.removeItem(e)}function S(e,a){let t=a.length,l=a[t-1],i=document.createElement("div");n.deleteDivClasses&&n.deleteDivClasses.split(" ").forEach(function(y){i.classList.add(y)}),i.innerHTML=n.deleteDataHeadline+n.deleteDataText;let c=document.createElement("button");c.innerHTML=n.deleteDataButtonLabel,c.classList.add("delete-data-button"),n.deleteDataButtonClasses&&n.deleteDataButtonClasses.split(" ").forEach(function(y){c.classList.add(y)}),c.addEventListener("click",function(h){h.preventDefault(),B(e.id),location.reload(),alert("Ihre Daten wurden gelÃ¶scht.")}),i.appendChild(c),l.appendChild(i)}class w{constructor(a){this.switchNode=a,this.switchNode.addEventListener("focus",()=>this.onFocus(event)),this.switchNode.addEventListener("blur",()=>this.onBlur(event))}onFocus(a){a.currentTarget.parentNode.classList.add("focus")}onBlur(a){a.currentTarget.parentNode.classList.remove("focus")}}Array.from(document.querySelectorAll("input[type=checkbox][role^=switch]")).forEach(e=>new w(e))}export{I as f};
