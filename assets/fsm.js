function C(d={}){d=Object.assign({selector:".formslider",showProgress:!0,showProgressCount:!1,nextButtonLabel:"Next",prevButtonLabel:"Prev",deleteDataButtonLabel:"Delete my data",deleteDataHeadline:"<h6>Delete data</h6>",deleteDataText:"<p>Your data is stored locally in your browser. If you want to delete your data, you can do so by clicking the button below. (If you are on a public computer, you should delete your data.)</p>",prependProgress:!1,progressClickable:!0},d),document.querySelectorAll(d.selector).forEach(function(e){let a=e.id,t=0;const l=e.querySelector("form"),s=e.querySelectorAll("fieldset");let i=s.length;l.querySelectorAll("input, select, textarea").forEach(function(o){let r=L(o);o.attributes.required&&r.classList.add("required"),o.addEventListener("focus",function(){let n=L(o);n&&n.classList.add("active")}),o.addEventListener("blur",function(){let n=L(o);n&&o.value===""&&n.classList.remove("active")})});let k=localStorage.getItem(l.id);if(k){let o=JSON.parse(k);for(let r in o){let n=l.querySelector('[name="'+r+'"]');if(n)if(n.type==="checkbox")n.checked=!0;else if(n.type==="radio"){let B=l.querySelectorAll('[name="'+r+'"][value="'+o[r]+'"]');for(let g of B)g.value===o[r]&&(g.checked=!0)}else n.value=o[r]}}if(d.showProgress){var u=document.createElement("div");u.classList.add("form-progress"),d.prependProgress?e.prepend(u):e.appendChild(u),s.forEach(function(o,r){var n=document.createElement("div");n.classList.add("form-progress-step"),n.setAttribute("data-stepcount",r),d.progressClickable&&(n.classList.add("clickable"),n.addEventListener("click",function(){t=r,t=p(t,l,c,y,i,r),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})})),d.showProgressCount&&(n.innerHTML=r+1),u.appendChild(n)})}let f=u.querySelector('[data-stepcount="'+t+'"]');var m=document.createElement("div");m.classList.add("formslider-nav"),e.appendChild(m);var c=document.createElement("button");c.innerHTML=d.prevButtonLabel,c.classList.add("form-prev-button","uk-button","uk-button-default"),m.appendChild(c),t===0&&(c.style.display="none",f.classList.add("active"));var y=document.createElement("button");y.innerHTML=d.nextButtonLabel,y.classList.add("form-next-button","uk-button","uk-button-default"),m.appendChild(y);for(let o=0;o<i;o++)s[o].setAttribute("data-count",o);c.addEventListener("click",function(){v(l),t=p(t,l,c,y,i,"prev"),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),y.addEventListener("click",function(){v(l),t=p(t,l,c,y,i,"next"),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),q(l,s),l.addEventListener("submit",function(o){v(l)}),l.querySelector('button[type="submit"]').addEventListener("click",function(){v(l),l.querySelectorAll(":invalid").forEach(r=>{console.log(r),r.classList.add("invalid")}),l.querySelector(":invalid").focus();let o=l.querySelector(":invalid");t=parseInt(o.closest("fieldset").getAttribute("data-count")),t===0?(l.style.left="0",c.style.display="none",y.style.display="inline-block"):t>0&&(l.style.left="-"+t+"00%",c.style.display="inline-block",y.style.display="inline-block"),f=b(u,f,t,e,l),document.getElementById(a).scrollIntoView({behavior:"smooth"})})});function b(e,a,t,l,s){let h=l.querySelector('fieldset[data-count="'+t+'"]').offsetHeight;return s.style.height=h+"px",a.classList.remove("active"),a.classList.add("done"),a=e.querySelector('[data-stepcount="'+t+'"]'),a.classList.add("active"),a}function p(e,a,t,l,s,i){switch(i){case"first":e=0;break;case"prev":e>0&&e--;break;case"next":e<s-1&&e++;break;case"last":e=s-1;break;case typeof i=="number":i>=0&&i<s&&(e=i);break}return e===0?(a.style.left="0",t.style.display="none",l.style.display="inline-block"):e>0&&e<s-1?(a.style.left="-"+e+"00%",t.style.display="inline-block",l.style.display="inline-block"):e===s-1&&(a.style.left="-"+e+"00%",t.style.display="inline-block",l.style.display="none"),E(a),e}function E(e){e.querySelectorAll('input[name$="_again"]').forEach(function(a){let t=a.name,l=e.querySelector('input[name="'+t.replace("_again","")+'"]').value;l?a.value=l:a.value=""})}function v(e){let a=new FormData(e),t=S(a);localStorage.setItem(e.id,JSON.stringify(t))}function S(e){let a={};for(let[t,l]of e)t.endsWith("_csrf_token")||(a[t]!==void 0?(Array.isArray(a[t])||(a[t]=[a[t]]),a[t].push(l)):a[t]=l);return a}function L(e){var a=e.id;let t=document.getElementsByTagName("label");for(var l=0;l<t.length;l++)if(t[l].htmlFor==a)return t[l]}function w(e){localStorage.removeItem(e)}function q(e,a){let t=a.length,l=a[t-1],s=document.createElement("div");s.classList.add("uk-margin-large-top"),s.innerHTML=d.deleteDataHeadline+d.deleteDataText;let i=document.createElement("button");i.innerHTML=d.deleteDataButtonLabel,i.classList.add("delete-data-button","uk-button","uk-button-default"),i.addEventListener("click",function(h){h.preventDefault(),w(e.id),location.reload(),alert("Ihre Daten wurden gelÃ¶scht.")}),s.appendChild(i),l.appendChild(s)}class I{constructor(a){this.switchNode=a,this.switchNode.addEventListener("focus",()=>this.onFocus(event)),this.switchNode.addEventListener("blur",()=>this.onBlur(event))}onFocus(a){a.currentTarget.parentNode.classList.add("focus")}onBlur(a){a.currentTarget.parentNode.classList.remove("focus")}}Array.from(document.querySelectorAll("input[type=checkbox][role^=switch]")).forEach(e=>new I(e))}export{C as f};
