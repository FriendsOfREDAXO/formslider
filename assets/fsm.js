function A(d={}){d=Object.assign({selector:".formslider",showProgress:!0,showProgressCount:!1,nextButtonLabel:"Next",prevButtonLabel:"Prev",deleteDataButtonLabel:"Delete my data",deleteDataHeadline:"<h6>Delete data</h6>",deleteDataText:"<p>Your data is stored locally in your browser. If you want to delete your data, you can do so by clicking the button below. (If you are on a public computer, you should delete your data.)</p>",prependProgress:!1,progressClickable:!0},d),document.querySelectorAll(d.selector).forEach(function(l){let a=l.id,e=0;const t=l.querySelector("form"),i=l.querySelectorAll("fieldset");let u=i.length;t.querySelectorAll("input, select, textarea").forEach(function(n){let s=p(n);n.attributes.required&&s.classList.add("required"),n.addEventListener("focus",function(){let o=p(n);o&&o.classList.add("active")}),n.addEventListener("blur",function(){let o=p(n);o&&n.value===""&&o.classList.remove("active")})});let k=localStorage.getItem(t.id);if(k){let n=JSON.parse(k);for(let s in n){let o=t.querySelector('[name="'+s+'"]');if(o)if(o.type==="checkbox")o.checked=!0;else if(o.type==="radio"){let I=t.querySelectorAll('[name="'+s+'"][value="'+n[s]+'"]');for(let g of I)g.value===n[s]&&(g.checked=!0)}else o.value=n[s]}}if(d.showProgress){var f=document.createElement("div");f.classList.add("form-progress"),d.prependProgress?l.prepend(f):l.appendChild(f),i.forEach(function(n,s){var o=document.createElement("div");o.classList.add("form-progress-step"),o.setAttribute("data-stepcount",s),d.progressClickable&&(o.classList.add("clickable"),o.addEventListener("click",function(){e=s,t.style.left="-"+e+"00%",y=b(f,y,e,l,t),e===0?(t.style.left="0",r.style.display="none",c.style.display="inline-block"):e>0&&e<u-1?(t.style.left="-"+e+"00%",r.style.display="inline-block",c.style.display="inline-block"):e===u-1&&(t.style.left="-"+e+"00%",r.style.display="inline-block",c.style.display="none"),document.getElementById(a).scrollIntoView({behavior:"smooth"})})),d.showProgressCount&&(o.innerHTML=s+1),f.appendChild(o)})}let y=f.querySelector('[data-stepcount="'+e+'"]');var m=document.createElement("div");m.classList.add("formslider-nav"),l.appendChild(m);var r=document.createElement("button");r.innerHTML=d.prevButtonLabel,r.classList.add("form-prev-button","uk-button","uk-button-default"),m.appendChild(r),e===0&&(r.style.display="none",y.classList.add("active"));var c=document.createElement("button");c.innerHTML=d.nextButtonLabel,c.classList.add("form-next-button","uk-button","uk-button-default"),m.appendChild(c);for(let n=0;n<u;n++)i[n].setAttribute("data-count",n);r.addEventListener("click",function(){v(t),e=E(e,t,r,c),y=b(f,y,e,l,t),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),c.addEventListener("click",function(){v(t),e=S(e,t,r,c,u),y=b(f,y,e,l,t),document.getElementById(a).scrollIntoView({behavior:"smooth"})}),B(t,i),t.addEventListener("submit",function(n){v(t)}),t.querySelector('button[type="submit"]').addEventListener("click",function(){v(t),t.querySelectorAll(":invalid").forEach(s=>{console.log(s),s.classList.add("invalid")}),t.querySelector(":invalid").focus();let n=t.querySelector(":invalid");e=parseInt(n.closest("fieldset").getAttribute("data-count")),e===0?(t.style.left="0",r.style.display="none",c.style.display="inline-block"):e>0&&(t.style.left="-"+e+"00%",r.style.display="inline-block",c.style.display="inline-block"),y=b(f,y,e,l,t),document.getElementById(a).scrollIntoView({behavior:"smooth"})})});function b(l,a,e,t,i){let h=t.querySelector('fieldset[data-count="'+e+'"]').offsetHeight;return i.style.height=h+"px",a.classList.remove("active"),a.classList.add("done"),a=l.querySelector('[data-stepcount="'+e+'"]'),a.classList.add("active"),a}function E(l,a,e,t){return l==1?(l--,a.style.left="0"):l>1&&(l--,a.style.left="-"+l+"00%"),L(a),l===0?e.style.display="none":(e.style.display="inline-block",t.style.display="inline-block"),l}function S(l,a,e,t,i){return l<i-1&&l++,a.style.left="-"+l+"00%",L(a),l===i-1?t.style.display="none":(t.style.display="inline-block",e.style.display="inline-block"),l}function L(l){l.querySelectorAll('input[name$="_again"]').forEach(function(a){let e=a.name,t=l.querySelector('input[name="'+e.replace("_again","")+'"]').value;t?a.value=t:a.value=""})}function v(l){let a=new FormData(l),e=w(a);localStorage.setItem(l.id,JSON.stringify(e))}function w(l){let a={};for(let[e,t]of l)e.endsWith("_csrf_token")||(a[e]!==void 0?(Array.isArray(a[e])||(a[e]=[a[e]]),a[e].push(t)):a[e]=t);return a}function p(l){var a=l.id;let e=document.getElementsByTagName("label");for(var t=0;t<e.length;t++)if(e[t].htmlFor==a)return e[t]}function q(l){localStorage.removeItem(l)}function B(l,a){let e=a.length,t=a[e-1],i=document.createElement("div");i.classList.add("uk-margin-large-top"),i.innerHTML=d.deleteDataHeadline+d.deleteDataText;let u=document.createElement("button");u.innerHTML=d.deleteDataButtonLabel,u.classList.add("delete-data-button","uk-button","uk-button-default"),u.addEventListener("click",function(h){h.preventDefault(),q(l.id),location.reload(),alert("Ihre Daten wurden gelÃ¶scht.")}),i.appendChild(u),t.appendChild(i)}class C{constructor(a){this.switchNode=a,this.switchNode.addEventListener("focus",()=>this.onFocus(event)),this.switchNode.addEventListener("blur",()=>this.onBlur(event))}onFocus(a){a.currentTarget.parentNode.classList.add("focus")}onBlur(a){a.currentTarget.parentNode.classList.remove("focus")}}Array.from(document.querySelectorAll("input[type=checkbox][role^=switch]")).forEach(l=>new C(l))}export{A as f};
